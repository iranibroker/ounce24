<mat-toolbar>
  <button mat-icon-button goBack>
    <i class="fa-regular fa-chevron-left fa-xs rtl"></i>
  </button>
  <span>{{ 'profile.avatar.edit' | translate }}</span>
  <span class="spacer"></span>
  <button
    mat-flat-button
    color="primary"
    (click)="onSave()"
    [disabled]="updateAvatarMutation.isPending()"
  >
    @if (updateAvatarMutation.isPending()) {
      <i class="fa-solid fa-spinner fa-spin"></i>
    } @else {
      {{ 'app.save' | translate }}
    }
  </button>
</mat-toolbar>

<div class="container">
  <header>
    <div class="avatar-placeholder">
      <img
        [appAvatar]
        alt="Avatar"
        [color]="selectedColor()"
        [mouth]="selectedMouth()"
        [eye]="selectedEye()"
      />
    </div>
  </header>

  <mat-tab-group>
    <mat-tab label="Color">
      <mat-grid-list cols="4" rowHeight="1:1">
        @for (color of COLORS; track color) {
          <mat-grid-tile (click)="selectedColor.set(color)">
            <img
              [appAvatar]
              [color]="color"
              [mouth]="selectedMouth()"
              [eye]="selectedEye()"
            />
          </mat-grid-tile>
        }
      </mat-grid-list>
    </mat-tab>

    <mat-tab label="Eye">
      <mat-grid-list cols="4" rowHeight="1:1">
        @for (eye of EYES; track eye) {
          <mat-grid-tile (click)="selectedEye.set(eye)">
            <img
              [appAvatar]
              [eye]="eye"
              [mouth]="selectedMouth()"
              [color]="selectedColor()"
            />
          </mat-grid-tile>
        }
      </mat-grid-list>
    </mat-tab>

    <mat-tab label="Mouth">
      <mat-grid-list cols="4" rowHeight="1:1">
        @for (mouth of MOUTHS; track mouth) {
          <mat-grid-tile (click)="selectedMouth.set(mouth)">
            <img
              [appAvatar]
              [mouth]="mouth"
              [eye]="selectedEye()"
              [color]="selectedColor()"
            />
          </mat-grid-tile>
        }
      </mat-grid-list>
    </mat-tab>
  </mat-tab-group>
</div>
